{% include indicator_form_common_js.html %}

<div id="id_reporting_period_modal" class="modal fade" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content" id="reporting_period_content">
            <div class="modal-body ml-4 mb-3" id="reporting_period_body" style="padding-top:10px">
                <div class="mb-4">
                    <div class="pt-3" style="display:inline-block; width: 90%">
                        <div class="mb-4"><h2>{% trans "Reporting period" %}</h2></div>
                        <span>{% trans "The program reporting period is used in the setup of periodic targets and in Indicator Performance Tracking Tables (IPTT). TolaActivity initially sets the reporting period to include the program’s official start and end dates, as recorded in the Grant and Award Information Tracker (GAIT) system. The reporting period may be adjusted to align with the program’s indicator plan." %}</span>
                    </div>
                    <button
                        type="button"
                        class="close"
                        data-dismiss="modal"
                        style="display:inline-block;"
                        aria-label="Close">
                        <span class="x-modal">&times;</span>
                    </button>
                </div>
                <div id="div-gait-dates" class="mb-3">
                    <div id="div_gait_dates_title" class="mb-3">
                        <h3>{% trans "GAIT program dates" %}</h3>
                    </div>
                    <div id="div_gait_dates">
                        <div id="div_id_gait_start_date" class="mr-4" style="display: inline-block;">
                            <h4>
                                <div class="mb-0">{% trans "START DATE" %}</div>
                                <div id="id_gait_start_date"></div>
                            </h4>
                        </div>

                        <div id="div_id_gait_start_date" style="display: inline-block;">
                            <h4>
                                <div class="mb-0">{% trans "END DATE" %}</div>
                                <div id="id_gait_end_date"></div>
                            </h4>
                        </div>
                    </div>
                </div>
                <div class="card inputs-in-a-box" id="div-card-user-dates" style="width: 90%">
                    <div class="card-body p-4">
                        <div id="div_reporting_dates_title">
                            <h3>{% trans "Reporting start and end dates" %}</h3>
                        </div>
                        <div id="div_reporting_dates">
                            <div id="div_id_reporting_start_date" style="display: inline-block;" class="mr-5">
                                <h4>
                                    <div class="mb-0">{% trans "START MONTH" %}</div>
                                    <input type="text"
                                           name="reporting_period_start"
                                           class="form-control monthPicker"
                                           value="2018-03-04"
                                           id="id_reporting_start_date">
                                </h4>
                            </div>
                            <div id="div_reporting_end_date" style="display: inline-block;">
                                <h4>
                                    <div class="mb-0">{% trans "END MONTH" %}</div>
                                    <input type="text"
                                           name="reporting_period_end"
                                           class="form-control monthPicker"
                                           value="2018-03-04"
                                           id="id_reporting_end_date">
                                </h4>
                            </div>
                        </div>
                        <div id="div_reporting_dates_description">
                            {% trans "While a program may begin and end any day of the month, reporting periods must begin on the first day of the month and end on the last day of the month. Please note that the reporting start month can only be adjusted" %} <span class="color-red">{% trans "before targets are set up and a program begins submitting performance results." %}</span> {% trans "The reporting end month can still be extended." %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    /*
    *  Populate the programs start and end datestr
    */
    $('#id_reporting_period_modal').on('show.bs.modal', function (event) {
        var periods = $(event.relatedTarget).data('periods');
        console.log('periods', periods);
        $("#id_gait_start_date").text(periods.pStart)
        $("#id_gait_end_date").text(periods.pEnd)
        $("#id_reporting_start_date").val(periods.rStart)
        $("#id_reporting_end_date").val(periods.rEnd)

        setupPopupCalendar()


    });

 </script>
